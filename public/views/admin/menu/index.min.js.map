{"version":3,"sources":["index.js"],"names":["construirArbol","arbol","$","jstree","defaults","core","themes","variant","check_callback","data","animation","plugins","contextmenu","items","context_menu","on","evt","click","event","id","this","parent","attr","treeLink","val","actualizarRuta","tree","get_json","flat","i","length","a_attr","href","settings","setTimeout","refresh","almacenar","informacion","ajax","url","window","location","pathname","type","success","err","resultado","toastr","options","closeButton","debug","newestOnTop","progressBar","positionClass","preventDuplicates","timeOut","onclick","console","log","node","Create","separator_before","separator_after","label","action","obj","$node","create_node","edit","Rename","Remove","confirm","delete_node","treeJson","JSON","parse"],"mappings":";AAGA,QAASA,gBAAeC,GACtBC,EAAEC,OAAOC,SAASC,KAAKC,OAAOC,QAAU,OAC7BL,GAAE,WAAWC,QACpBE,MACIG,gBAAkB,EAClBC,KAAQR,EACRS,UAAc,KAGlBC,SACI,cACA,MACA,WACA,SACA,QACA,SACA,OACA,YACA,MAEJC,aAAgBC,MAAOC,gBACxBC,GAAG,qBAAqB,SAASC,EAAKP,GACvCP,EAAE,KAAKe,MAAM,SAASC,GACpB,GAAIC,GAAMjB,EAAEkB,MAAMC,SAASC,KAAK,MAC5BC,EAAWrB,EAAEkB,MAAME,KAAK,OAC5BpB,GAAE,OAAOsB,IAAIL,GACbjB,EAAE,SAASsB,IAAID,OAIrB,QAASE,kBAGP,IAAK,GAFDC,GAAOxB,EAAE,WAAWC,QAAO,GAC3BF,EAAQyB,EAAKC,SAAS,KAAMC,MAAK,IAC5BC,EAAI,EAAGA,EAAI5B,EAAM6B,OAAQD,IAC5B5B,EAAM4B,GAAGV,KAAOjB,EAAE,OAAOsB,QAC3BvB,EAAM4B,GAAGE,OAAOC,KAAK9B,EAAE,SAASsB,MAGpCE,GAAKO,SAAS5B,KAAKI,KAAOR,EAC1BiC,WAAW,WACTR,EAAKS,WACL,IAEJ,QAASC,aACP,GAAIV,GAAOxB,EAAE,WAAWC,QAAO,GAC3BkC,EAAcX,EAAKC,SAAS,KAAMC,MAAK,GAC3C1B,GAAEoC,MACAC,IAAKC,OAAOC,SAASC,SACrBC,KAAM,SACNC,QAAS,SAASC,EAAIC,GACpB,IAAK,GAAIjB,GAAI,EAAGA,EAAIQ,EAAYP,OAAQD,IACtC3B,EAAEoC,MACAC,IAAKC,OAAOC,SAASC,SACrBC,KAAM,OACNlC,KAAM4B,EAAYR,IAGtBkB,QAAOC,SACHC,aAAa,EACbC,OAAO,EACPC,aAAa,EACbC,aAAa,EACbC,cAAe,mBACfC,mBAAmB,EACnBC,QAAS,OACTC,QAAS,WACLC,QAAQC,IAAI,qBAIpBX,OAAOH,QAAQ,0BAA2B,mBAKhD,QAAS9B,cAAa6C,GACrB,GAAIjC,GAAOxB,EAAE,WAAWC,QAAO,GAGxBU,GACA+C,QACIC,kBAAoB,EACpBC,iBAAmB,EACnBC,MAAS,WACTC,OAAU,SAAUC,GAChB,GAAIC,GAAQxC,EAAKyC,YAAYR,EAC7BjC,GAAK0C,KAAKF,KAGlBG,QACIR,kBAAoB,EACpBC,iBAAmB,EACnBC,MAAS,YACTC,OAAU,SAAUC,GAChBvC,EAAK0C,KAAKT,KAGlBW,QACIT,kBAAoB,EACpBC,iBAAmB,EACnBC,MAAS,WACTC,OAAU,SAAUC,GAChBM,QAAQ,iBACV7C,EAAK8C,YAAYb,KAO3B,OAAO9C,GAjHX,GAAI4D,UAAWC,KAAKC,MAAMzE,EAAE,YAAYoB,KAAK,SAE7CtB,gBAAeyE","file":"index.min.js","sourcesContent":["var treeJson = JSON.parse($(\"#entrada\").attr(\"class\"));\n\nconstruirArbol(treeJson);\nfunction construirArbol(arbol) {\n  $.jstree.defaults.core.themes.variant = \"small\";\n  var tree = $('#jstree').jstree({\n      'core': {\n          \"check_callback\": true,\n          'data': arbol,\n          \"animation\" : 100\n      },\n\n      \"plugins\": [\n          \"contextmenu\",\n          \"dnd\",\n          \"massload\",\n          \"search\",\n          \"state\",\n          \"themes\",\n          'crrm',\n          \"json_data\",\n          \"ui\"\n      ],\n      \"contextmenu\": {items: context_menu}\n  }).on(\"select_node.jstree\",function(evt, data){\n    $(\"a\").click(function(event) {\n      var id  = $(this).parent().attr(\"id\");\n      var treeLink = $(this).attr(\"href\");\n      $(\"#id\").val(id);\n      $(\"#ruta\").val(treeLink);\n    });\n  });\n}\nfunction actualizarRuta() {\n  var tree = $('#jstree').jstree(true);\n  var arbol = tree.get_json('#', {flat:true});\n  for (var i = 0; i < arbol.length; i++) {\n    if (arbol[i].id === $(\"#id\").val()) {\n      arbol[i].a_attr.href=$(\"#ruta\").val();\n    }\n  }\n  tree.settings.core.data = arbol;\n  setTimeout(function() {\n    tree.refresh();\n  },10);\n}\nfunction almacenar() {\n  var tree = $('#jstree').jstree(true);\n  var informacion = tree.get_json('#', {flat:true});\n  $.ajax({\n    url: window.location.pathname,\n    type: 'DELETE',\n    success: function(err,resultado) {\n      for (var i = 0; i < informacion.length; i++) {\n        $.ajax({\n          url: window.location.pathname,\n          type: 'POST',\n          data: informacion[i]\n        });\n      }\n      toastr.options = {\n          closeButton: true,\n          debug: false,\n          newestOnTop: false,\n          progressBar: true,\n          positionClass: \"toast-top-center\" || 'toast-top-right',\n          preventDuplicates: false,\n          timeOut: \"1000\",\n          onclick: function() {\n              console.log(\"Toco el Mensaje\");\n          }\n      };\n      //success error warning info\n      toastr.success(\"Se ha Guardado el Menu.\", \"Felicidades!\");\n    }\n  });\n\n}\nfunction context_menu(node){\n\tvar tree = $('#jstree').jstree(true);\n\n\t// The default set of all items\n    var items = {\n        \"Create\": {\n            \"separator_before\": false,\n            \"separator_after\": false,\n            \"label\": \"Ingresar\",\n            \"action\": function (obj) {\n                var $node = tree.create_node(node);\n                tree.edit($node);\n            }\n        },\n        \"Rename\": {\n            \"separator_before\": false,\n            \"separator_after\": false,\n            \"label\": \"Renombrar\",\n            \"action\": function (obj) {\n                tree.edit(node);\n            }\n        },\n        \"Remove\": {\n            \"separator_before\": true,\n            \"separator_after\": false,\n            \"label\": \"Eliminar\",\n            \"action\": function (obj) {\n            \tif(confirm('Esta Seguro?')){\n            \t\ttree.delete_node(node);\n            \t}\n            }\n        }\n    };\n\n\n    return items;\n}\n"]}