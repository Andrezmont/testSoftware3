/*
 Godie007 2017-01-20 
*/

function encodeImageFileAsURL(a,b){var c=a.files;if(c.length>0){var d=c[0];if(d.name.match(/\.(jpg|jpeg|png|gif|tiff|bmp|ico)$/))if(d.size/1024<=1024){var e=new FileReader;e.onload=function(a){var c=document.createElement("img"),d=a.target.result;c.src=d,document.getElementById("imagen"+b).innerHTML=c.outerHTML},e.readAsDataURL(d)}else alert("Disculpe, No se permiten Imagenes mayores a 1 MB!");else alert("El archivo que intenta subir no es una Imgen")}}function validarCampos(){for(var a=$("input[class^=txt],textarea[class^=txt]"),b=!0,c=0;c<a.length;c++){var d=a.eq(c).parent().find("label").text().trim();"Cantidad"!==d&&"Valor"!==d&&"Nombre"!==d||(""===a.eq(c).val()?(a.eq(c).css("border","1px solid red"),b=!1):(a.eq(c).css("border","1px solid #ccc"),b=!0))}return b}function tomarValores(){var a="[{";a+='"campos":[';for(var b=$('div[class*="field-checkbox-group"]:not([class*="preview"])'),c=0;c<b.length;c++){var d=$(b[c]).find("label"),e=$(b[c]).find("input");a+="{";for(var f="",g="",h=1;h<d.length;h++){var i=$(d[h]).text().trim();$(e[h-1]).is(":checked")&&(f+=i+"<br>",g+=$(e[h-1]).attr("id")),""!==i&&h<d.length-1&&(g+="/*")}var j=b.eq(c).text().split(" ")[0].trim();a+='"titulo":"'+j.replace("?","")+'",',a+='"valor":"'+f+'",',a+='"id":"'+g+'"',a+="},"}for(var k=$('input[type=date]:not([id*="preview"]),input[type=file]:not([id*="preview"]),input[id^="number-"]:not([id*="preview"]),input[id^="text-"]:not([id*="preview"]),textarea[id^="textarea-"]:not([id*="preview"]),select[id^="select-"]:not([id*="preview"]),input[id^="radio-group-"]:checked:not([id*="preview"]),input[id*="checkbox"]:not([id*="preview"]):not([id*="group"])'),c=k.length-1;c>=0;c--)if(k.eq(c).length>0){var l=k.eq(c).parent().find("label").eq(0).text().trim(),m=""===k.eq(c).val()?" ":k.eq(c).val();if(k.eq(c).attr("id").indexOf("radio-group")!==-1){l=k.eq(c).parent().parent().find("label").eq(0).text().trim();var n=k.eq(c).attr("id").split("-")[3];m=k.eq(c).parent().find("label").eq(n).text().trim()}if(k.eq(c).attr("id").indexOf("select-")!==-1&&(m=k.eq(c).find("option:selected").val()),k.eq(c).attr("id").indexOf("file-")!==-1){var o=k.eq(c).attr("id").split("-")[1],p=$("#imagen"+o+" img").prop("src");void 0!==p&&""!==p||(p="/images/default.png"),m="<img src="+p+" style=height:80px;width:80px;>"}k.eq(c).attr("id").indexOf("checkbox-")!==-1&&(l=0===k.eq(c).parent().find("label").length?k.eq(c).parent().parent().find("label").text().trim():k.eq(c).parent().find("label").text().trim(),m=$("#"+k.eq(c).attr("id")).is(":checked")),a+='{"id":"'+k.eq(c).attr("id")+'",',a+='"titulo":"'+l.replace("?","")+'",',a+='"valor":"'+m+'"}',c>0&&(a+=",")}a+="]}",a+="]";var q=JSON.parse(a)[0];return q}$(document).ready(function(){function a(a){var b=null;if(document.cookie&&""!==document.cookie)for(var c=document.cookie.split(";"),d=0;d<c.length;d++){var e=jQuery.trim(c[d]);if(e.substring(0,a.length+1)===a+"="){b=decodeURIComponent(e.substring(a.length+1));break}}return b}$("#guardar").click(function(){$.ajax({url:"/account/vendedor/",type:"POST",data:{data:tomarValores(),_csrf:b,modulo:"vendedor",usuario:$("#usuario").attr("class")},error:function(a){console.log(a)},success:function(a){if(""!=a){console.log("Si hubo Respuesta!");for(var b=$("input[id^=number]:visible"),c=0;c<b.length;c++)console.log(b.eq(c).parent().find("label").text().trim()),"Cedula"===b.eq(c).parent().find("label").text().trim()&&(window.opener.document.getElementById("cedulaV").value=b.eq(c).val(),window.opener.notificarIngresoDevendedor(),window.close())}}})});var b=a("_csrfToken");setTimeout(function(){$("input[id^='file-']:not([id$='preview'])").each(function(){var a=$(this).attr("id").split("-")[1];$(".field-file-"+a).append('<div id="imagen'+a+'"></div>'),$("#file-"+a).change(function(){encodeImageFileAsURL(this,a)})})},100),$.ajax({url:"/account/formulario/vendedor/",type:"POST",data:{_csrf:b,modulo:$("#modulo").attr("class")},error:function(a){console.log(a)},success:function(a){console.log(a),a.length>0&&window.sessionStorage.setItem("formData",JSON.stringify(JSON.stringify(a)));var b=a.length>0?JSON.stringify(JSON.stringify(a)):window.sessionStorage.getItem("formData"),c=document.querySelector(".build-wrap"),d=document.querySelector(".render-wrap"),e=b,f=!0,g={dataType:"json"};e&&(g.formData=JSON.parse(e));var h=function(){document.body.classList.toggle("form-rendered",f),f=!f},i=$(c).formBuilder(g).data("formBuilder");h(),$(d).formRender({dataType:"json",formData:i.formData})}})});
//# sourceMappingURL=vendedor.min.js.map