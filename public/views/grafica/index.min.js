/*! Godie007 - 2017-04-15 */
function generarGrafica(){for(var a=[],b=[],c=0;c<data.length;c++){a.push(data[c].titulo);var d=Math.abs(parseInt(100*(parseInt($("#ent"+c).val())-data[c].min)/(data[c].max-data[c].min)));console.log(data[c].titulo+":"+d+"%"),b.push(d)}for(var e=b,f=0,g=360/e.length,h=0;h<e.length;h++){var i=e[h],j=e[h+1];h<e.length-1?(i=e[h],j=e[h+1]):(i=e[h],j=e[0]);var k=Math.sqrt(Math.pow(i,2)+Math.pow(j,2)-2*i*j*Math.cos(toRadians(g))),l=(i+j+k)/2,m=Math.sqrt(l*(l-i)*(l-j)*(l-k));console.log("a: "+i+" ,b: "+j+" ,lado C: "+k+" ,Angulo: "+g+" ,Area: "+m),f+=m}console.log("Area Total = "+f),$("#areaF").text("Area Actual: "+f),$.ajax({url:"/account/grafica/cuestionario/",type:"POST",data:{area:$("#area").val()},error:function(a){console.log(a)},success:function(c){for(var d=0,e=0;e<c.ask.length;e++)for(var f=0;f<$("input[id^='radio']:checked").length;f++){var g=parseInt($("input[id^='radio']:checked").eq(f).attr("class").split("radio")[1]);if(g==e){var h=$("input[id^='radio']:checked").eq(f).val();h===c.ask[e].respuesta&&d++}}var i=100*d/c.ask.length;a.push("Cuestionario"),b.push(i),graficar(a,b)}})}function graficar(a,b){Chart.defaults.global.legend.display=!1,Chart.defaults.global.defaultFontColor="rgba(34,34,34, 1)";var c=$("#chartRadar"),d={labels:a,datasets:[{label:"Grafica",backgroundColor:"rgba(156,63,74,.5)",borderColor:"rgba(9,138,1,.5)",pointBackgroundColor:"rgba(156,63,74,1)",pointBorderColor:"rgba(9,138,1,.5)",pointHoverBackgroundColor:"rgba(9,138,1,.5)",pointHoverBorderColor:"rgba(9,138,1,.5)",pointBorderWidth:.5,data:b}]},e={scale:{ticks:{beginAtZero:!0,maxTicksLimit:10},pointLabels:{fontSize:12},gridLines:{color:"#999"}}};new Chart(c,{type:"radar",data:d,options:e})}function minmax(a,b,c){return parseInt(a)<b||isNaN(parseInt(a))?b:parseInt(a)>c?(toastr.options={closeButton:!0,debug:!1,newestOnTop:!1,progressBar:!0,positionClass:"toast-top-center",preventDuplicates:!1,timeOut:"1000",onclick:function(){console.log("Toco el Mensaje")}},toastr.warning("El valor deve estar en el intervalo ["+b+","+c+"]","Importante!"),c):a}function toRadians(a){return a*(Math.PI/180)}var data;$(document).ready(function(){$("#tabla").hide(),$("#chartRadar").hide(),$("button[name='next']").attr("style","background-color: #bf0000;"),$("button[name='next']").prop("disabled",!0),$("#area").trigger("focus");var a=0,b=$(".step-progress .step-slider .step-slider-item");$('.step-content .step-content-foot button[name="prev"]').addClass("out"),$('.step-content .step-content-foot button[name="next"]').on("click",function(){var c=$(this);b.length-1<a||($('.step-content .step-content-foot button[name="prev"]').removeClass("out"),a==b.length-2&&(c.addClass("out"),c.siblings('button[name="finish"]').removeClass("out")),$(b[a]).addClass("active"),$(".step-content-body").addClass("out"),a++,console.log(a),1==a&&($("#formInicio").hide(),$("#formCuestionario").show(),$("#chartRadar").hide(),console.log("PASO 2")),$("#"+b[a].dataset.id).removeClass("out"))}),$('.step-content .step-content-foot button[name="finish"]').on("click",function(){a!=b.length&&($("#formInicio").hide(),$("#formCuestionario").hide(),$("#chartRadar").show(),generarGrafica(),$(b[b.length-1]).addClass("active"),$(".step-content-body").addClass("out"),$("#stepLast").removeClass("out"),a++)}),$('.step-content .step-content-foot button[name="prev"]').on("click",function(){if(!(a-1<0)){1!=a&&2!=a||(console.log("PASO 1"),$("#formInicio").show(),$("#formCuestionario").hide(),$("#chartRadar").hide()),a--;var c=$(this);a<=b.length-1&&(c.siblings('button[name="next"]').removeClass("out"),c.siblings('button[name="finish"]').addClass("out")),$(".step-content-body").addClass("out"),$("#"+b[a].dataset.id).removeClass("out"),0===a?b.removeClass("active"):b.filter(":gt("+(a-1)+")").removeClass("active"),a-1<0&&$('.step-content .step-content-foot button[name="prev"]').addClass("out")}}),$("#area").change(function(){$("#tabla").show(),"-1"===$(this).val()?($("button[name='next']").attr("style","background-color: #bf0000;"),$("button[name='next']").prop("disabled",!0),$("table.table").hide(),$("#formCuestionario").hide()):($("button[name='next']").attr("style","background-color: #00ACC2;"),$("button[name='next']").prop("disabled",!1)),"-1"!==$(this).val()&&($.ajax({url:"/account/grafica/",type:"POST",data:{area:$(this).val()},error:function(a){console.log(a)},success:function(a){data=a,$("#tabla tbody tr").remove();for(var b=0;b<a.length;b++){var c='<input id="ent'+b+'" class="input-medium"  min="'+a[b].min+'" max="'+a[b].max+'" step="1" onblur="this.value = minmax(this.value, '+a[b].min+", "+a[b].max+')" type="number"value="'+a[b].min+'">';$("#tabla tbody").append("<tr><td>"+a[b].titulo+"</td><td>"+a[b].descripcion+"</td><td>"+a[b].min+"</td><td>"+a[b].max+"</td><td>"+c+"</td></tr>")}$("input:visible").eq(0).trigger("focus")}}),$.ajax({url:"/account/grafica/cuestionario/",type:"POST",data:{area:$(this).val()},error:function(a){console.log(a)},success:function(a){$("#formCuestionario div").remove();for(var b=0;b<a.ask.length;b++){var c="<form>",d="</form>",e='<div class="box">',f="</div>",g='<label class="control-label">'+a.ask[b].text+"</label>",h='<div class="radio">',i="<label>",j=a.ask[b].OA.length>1?'<input type="radio" class="radio'+b+'" id="radio" class="'+b+'" value="A" name="radio"/>'+a.ask[b].OA+"</br>":"",k=a.ask[b].OB.length>1?'<input type="radio" class="radio'+b+'" id="radio" class="'+b+'" value="B" name="radio"/>'+a.ask[b].OB+"</br>":"",l=a.ask[b].OC.length>1?'<input type="radio" class="radio'+b+'" id="radio" class="'+b+'" value="C" name="radio"/>'+a.ask[b].OC+"</br>":"",m=a.ask[b].OD.length>1?'<input type="radio" class="radio'+b+'" id="radio" class="'+b+'" value="D" name="radio"/>'+a.ask[b].OD+"</br>":"";$("#formCuestionario").append(e+g+c+h+j+k+l+m+f+d+i+f+f)}}}))})});
//# sourceMappingURL=index.min.js.map