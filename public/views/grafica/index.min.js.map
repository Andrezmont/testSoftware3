{"version":3,"sources":["index.js"],"names":["generarGrafica","result","engine","calculateEdges","data","labels","values","$","ajax","url","type","area","val","error","respuesta","console","log","success","doc","minimo","maximo","op","i","ask","length","d","id","parseInt","eq","attr","split","opcion","min","RA","RB","RC","RD","max","porcent","Math","abs","push","areaActual","calculateArea","toFixed","text","p_total","calculatePercentage","nivel","calculateLevel","areaTotal","calculateAreaTotal","window","saveCaculus","graficar","entrada","entrada2","Chart","defaults","global","legend","display","defaultFontColor","chartRadarDOM","chartRadarData","datasets","label","backgroundColor","borderColor","pointBackgroundColor","pointBorderColor","pointHoverBackgroundColor","pointHoverBorderColor","pointBorderWidth","chartRadarOptions","scale","ticks","beginAtZero","maxTicksLimit","pointLabels","fontSize","gridLines","color","options","document","ready","hide","prop","trigger","step","stepItem","addClass","on","instance","this","removeClass","siblings","show","JSON","stringify","dataset","filter","change","remove","campoTexto","append","titulo","descripcion","formula","r","Sdiv","labelA","OA","labelB","OB","labelC","OC","labelD","OD","a_total","a_actual","porcentaje","usuario","empresa","minmax","value","isNaN","toastr","closeButton","debug","newestOnTop","progressBar","positionClass","preventDuplicates","timeOut","onclick","warning"],"mappings":"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","file":"index.min.js","sourcesContent":["var data; // variable que almacena los indicadores relacionados a un area\nvar engine = window.engine;\n\n$(document).ready(function() {\n    $(\"#tabla\").hide();\n    $(\"#chartRadar\").hide();\n    $(\"#resultado\").hide();\n    $(\"#resultado\").hide();\n    $(\"button[name='next']\").attr('style', 'background-color: #bf0000;');\n\n    $(\"button[name='next']\").prop('disabled', true);\n    $(\"#area\").trigger('focus');\n    var step = 0;\n    var stepItem = $('.step-progress .step-slider .step-slider-item');\n\n    $('.step-content .step-content-foot button[name=\"prev\"]').addClass('out');\n\n    // Step Next\n    $('.step-content .step-content-foot button[name=\"next\"]').on('click', function() {\n        var instance = $(this);\n        if (stepItem.length - 1 < step) {\n            return;\n        }\n        $('.step-content .step-content-foot button[name=\"prev\"]').removeClass('out');\n        if (step == (stepItem.length - 2)) {\n            instance.addClass('out');\n            instance.siblings('button[name=\"finish\"]').removeClass('out');\n        }\n        $(stepItem[step]).addClass('active');\n        $('.step-content-body').addClass('out');\n        step++;\n        if (step == 1) {\n            $(\"#formInicio\").hide();\n            $(\"#formCuestionario\").show();\n            $(\"#chartRadar\").hide();\n            $(\"#resultado\").hide();\n            console.log(\"PASO 2\");\n        }\n        console.log(JSON.stringify(stepItem[step]));\n        if (stepItem[step]) {\n          $('#' + stepItem[step].dataset.id).removeClass('out');\n        }\n    });\n\n    // Step Last\n    $('.step-content .step-content-foot button[name=\"finish\"]').on('click', function() {\n        if (step == stepItem.length) {\n            return;\n        }\n\n        $(\"#formInicio\").hide();\n        $(\"#formCuestionario\").hide();\n        $(\"#chartRadar\").show();\n        $(\"#resultado\").show();\n        $('button[name=\"prev\"]').hide();\n        $(\"button[name='finish']\").hide();\n        generarGrafica();\n\n        $(stepItem[stepItem.length - 1]).addClass('active');\n        $('.step-content-body').addClass('out');\n        $('#stepLast').removeClass('out');\n        step++;\n    });\n\n    // Step Previous\n    $('.step-content .step-content-foot button[name=\"prev\"]').on('click', function() {\n        if (step - 1 < 0) {\n            return;\n        }\n        if (step == 1) {\n            console.log(\"PASO 1\");\n            $(\"#formInicio\").show();\n            $(\"#formCuestionario\").hide();\n            $(\"#chartRadar\").hide();\n            $(\"#resultado\").hide();\n        }\n        if (step == 2) {\n            $(\"#formCuestionario\").show();\n            $(\"#chartRadar\").hide();\n            $(\"#resultado\").hide();\n        }\n        step--;\n        var instance = $(this);\n        if (step <= (stepItem.length - 1)) {\n            instance.siblings('button[name=\"next\"]').removeClass('out');\n            instance.siblings('button[name=\"finish\"]').addClass('out');\n        }\n        $('.step-content-body').addClass('out');\n        $('#' + stepItem[step].dataset.id).removeClass('out');\n        if (step === 0) {\n            stepItem.removeClass('active');\n        } else {\n            stepItem.filter(':gt(' + (step - 1) + ')').removeClass('active');\n        }\n        if (step - 1 < 0) {\n            $('.step-content .step-content-foot button[name=\"prev\"]').addClass('out');\n        }\n    });\n    /**\n     * @autor:godie007\n     * @date: 2017/04/13 14:56\n     * En caso de que cambie la lista de seleccion de areas, se vuelve a cargar los indicadores relacionados a esa area\n     **/\n    $(\"#area\").change(function() {\n        /**\n         * @autor:godie007\n         * @date: 2017/04/13 14:48\n         * Se cargan los indicadores relacionados a una determinada Area\n         **/\n        $(\"#tabla\").show();\n        if ($(this).val() === \"-1\") {\n            $(\"button[name='next']\").attr('style', 'background-color: #bf0000;');\n            $(\"button[name='next']\").prop('disabled', true);\n            $(\"table.table\").hide();\n            $(\"#formCuestionario\").hide();\n        } else {\n            $(\"button[name='next']\").attr('style', 'background-color: #00ACC2;');\n            $(\"button[name='next']\").prop('disabled', false);\n        }\n        if ($(this).val() !== \"-1\") {\n            $.ajax({\n                url: \"/account/grafica/\",\n                type: 'POST',\n                data: {\n                    'area': $(this).val()\n                },\n                error: function(respuesta) {\n                    console.log(respuesta);\n                },\n                success: function(respuesta) {\n                    data = respuesta;\n                    if (respuesta.length === 0) {\n                        $(\"#tabla\").hide();\n                        $(\"button[name='next']\").attr('style', 'background-color: #bf0000;');\n                        $(\"button[name='next']\").prop('disabled', true);\n                    }\n                    $(\"#tabla tbody tr\").remove();\n                    for (var i = 0; i < respuesta.length; i++) {\n                        var campoTexto = '<input id=\"ent' + i + '\" class=\"input-medium\"  min=\"' + respuesta[i].min + '\" max=\"' + respuesta[i].max + '\" step=\"1\" onblur=\"this.value = minmax(this.value, ' + respuesta[i].min + ', ' + respuesta[i].max + ')\" type=\"number\"value=\"' + respuesta[i].min + '\">';\n                        $(\"#tabla tbody\").append('<tr><td>' + respuesta[i].titulo + '</td><td>' + respuesta[i].descripcion + '</td><td>' + respuesta[i].min + '</td><td>' + respuesta[i].max + '</td><td>' + campoTexto + '</td>' + '<td>' + respuesta[i].formula + '</td></tr>');\n                    }\n                    $(\"input:visible\").eq(0).trigger('focus');\n                }\n            });\n            /**\n             * @autor:godie007\n             * @date: 2017/04/15 00:10\n             * Se consulta el cuestionario relacionado a un area y se genera dinamicamente\n             * el formulario de preguntas\n             **/\n            $.ajax({\n                url: \"/account/grafica/cuestionario/\",\n                type: 'POST',\n                data: {\n                    'area': $(this).val()\n                },\n                error: function(respuesta) {\n                    console.log(respuesta);\n                },\n                success: function(r) {\n                    $(\"#formCuestionario div\").remove();\n                    for (var i = 0; i < r.ask.length; i++) {\n                        var form = '<form>';\n                        var Sform = '</form>';\n                        var div = '<div class=\"box\">';\n                        var Sdiv = '</div>';\n                        var label = '<label class=\"control-label\">' + r.ask[i].text + '</label>';\n                        var radio = '<div class=\"radio\">';\n                        var Slabel = '<label>';\n                        var labelA = r.ask[i].OA.length > 1 ? '<input type=\"radio\" class=\"radio' + i + '\" id=\"radio\" class=\"' + i + '\" value=\"A\" name=\"radio\"/>' + r.ask[i].OA + '</br>' : '';\n                        var labelB = r.ask[i].OB.length > 1 ? '<input type=\"radio\" class=\"radio' + i + '\" id=\"radio\" class=\"' + i + '\" value=\"B\" name=\"radio\"/>' + r.ask[i].OB + '</br>' : '';\n                        var labelC = r.ask[i].OC.length > 1 ? '<input type=\"radio\" class=\"radio' + i + '\" id=\"radio\" class=\"' + i + '\" value=\"C\" name=\"radio\"/>' + r.ask[i].OC + '</br>' : '';\n                        var labelD = r.ask[i].OD.length > 1 ? '<input type=\"radio\" class=\"radio' + i + '\" id=\"radio\" class=\"' + i + '\" value=\"D\" name=\"radio\"/>' + r.ask[i].OD + '</br>' : '';\n\n                        $(\"#formCuestionario\").append(div + label + form + radio + labelA + labelB + labelC + labelD + Sdiv + Sform + Slabel + Sdiv + Sdiv);\n                        $(\"#formCuestionario\").hide();\n\n                    }\n                }\n            });\n        }\n    });\n});\n/**\n * @autor:godie007\n * @date: 2017/04/13 14:06\n * Al momento de hacer click en el boton graficar se toma la informacion de los indicadores\n * y la informacion suministrada por el usuario para calcular cada arista de la grafica\n **/\nfunction generarGrafica() {\n    /**\n     * @autor:godie007\n     * @date: 2017/04/15 02:45\n     * Se realizan los calculos para determinar el area total de la grafica de radar\n     **/\n    var result = engine.calculateEdges(data);\n    var labels = result.labels;\n    var values = result.values;\n\n    $.ajax({\n        url: \"/account/grafica/cuestionario/\",\n        type: 'POST',\n        data: {\n            'area': $(\"#area\").val()\n        },\n        error: function(respuesta) {\n            console.log(respuesta);\n        },\n        success: function(doc) {\n            var contador = 0;\n            var minimo = 0;\n            var maximo = 0;\n            var op = 0;\n            for (var i = 0; i < doc.ask.length; i++) {\n                for (var d = 0; d < $(\"input[id^='radio']:checked\").length; d++) {\n                    var id = parseInt($(\"input[id^='radio']:checked\").eq(d).attr(\"class\").split(\"radio\")[1]);\n                    if (id == i) {\n                        var opcion = $(\"input[id^='radio']:checked\").eq(d).val();\n                        op += doc.ask[i]['R'+opcion];\n                        // se determina el valor minimo de peso\n                        var min = doc.ask[i].RA;\n                        min = doc.ask[i].RA <= min && doc.ask[i].RA!==0 ? doc.ask[i].RA:min;\n                        min = doc.ask[i].RB <= min && doc.ask[i].RB!==0 ? doc.ask[i].RB:min;\n                        min = doc.ask[i].RC <= min && doc.ask[i].RC!==0 ? doc.ask[i].RC:min;\n                        min = doc.ask[i].RD <= min && doc.ask[i].RD!==0 ? doc.ask[i].RD:min;\n                        minimo += min;\n                        // se determina el valor maximo de peso\n                        var max = doc.ask[i].RA;\n                        max = doc.ask[i].RA >= max && doc.ask[i].RA!==0 ? doc.ask[i].RA:max;\n                        max = doc.ask[i].RB >= max && doc.ask[i].RB!==0 ? doc.ask[i].RB:max;\n                        max = doc.ask[i].RC >= max && doc.ask[i].RC!==0 ? doc.ask[i].RC:max;\n                        max = doc.ask[i].RD >= max && doc.ask[i].RD!==0 ? doc.ask[i].RD:max;\n                        maximo += max;\n\n                    }\n                }\n            }\n\n            var porcent = Math.abs(100*((op-minimo)/(maximo-minimo)));\n            console.log(\"respueta \"+op+\" min \"+minimo+\" max \" + maximo);\n            console.log(\"Porcentaje \"+porcent);\n            labels.push(\"Questionnaire\");\n            values.push(porcent);\n\n            var areaActual = engine.calculateArea(values).toFixed(2);\n            $(\"#areaF\").text(\"Area Actual: \" + areaActual);\n\n            $.ajax({\n                url: \"/account/grafica/nivel/\",\n                type: 'POST',\n                error: function(respuesta) {\n                    console.log(respuesta);\n                },\n                success: function(doc) {\n                    var p_total = engine.calculatePercentage(areaActual,values.length).toFixed(2);\n                    var nivel = engine.calculateLevel(doc, p_total);\n\n                    $(\"#procentF\").text(\"Procentaje Actual: \" + p_total + \"%\");\n                    $(\"#nivelA\").text(\"La empresa esta en \" + nivel);\n                    var areaTotal = engine.calculateAreaTotal(values.length).toFixed(2);\n                    window.saveCaculus(areaTotal,areaActual,nivel,p_total);\n                }\n            });\n\n            graficar(labels, values);\n        }\n    });\n\n}\nwindow.saveCaculus = function(a_total,a_actual,nivel,porcentaje) {\n  console.log(\"Registro Guardado!\");\n  $.ajax({\n      url: \"/account/grafica/registro/\",\n      type: 'POST',\n      data:{\n        'a_total':a_total,\n        'a_actual':a_actual,\n        'nivel':nivel,\n        'porcentaje':porcentaje,\n        'usuario':$(\"#usuario\").attr(\"class\"),\n        'empresa':$(\"#empresa\").attr(\"class\")\n      },\n      error: function(respuesta) {\n          console.log(respuesta);\n      },\n      success: function(doc) {\n          console.log(doc);\n      }\n  });\n};\n/**\n * @autor:godie007\n * @date: 2017/04/13 14:16\n * Funcion para hacer el grafico de Radar en base a informacion dinamica que llega por parte de las configuracionesque haga el cliente\n **/\nfunction graficar(entrada, entrada2) {\n    Chart.defaults.global.legend.display = false;\n    Chart.defaults.global.defaultFontColor = 'rgba(34,34,34, 1)'; //color del texto\n\n    var chartRadarDOM = $('#chartRadar');\n    // configuracion de la grafica\n    var chartRadarData = {\n        labels: entrada,\n        datasets: [{\n            label: \"Grafica\",\n            backgroundColor: \"rgba(156,63,74,.5)\",\n            borderColor: \"rgba(9,138,1,.5)\",\n            pointBackgroundColor: \"rgba(156,63,74,1)\",\n            pointBorderColor: \"rgba(9,138,1,.5)\",\n            pointHoverBackgroundColor: \"rgba(9,138,1,.5)\",\n            pointHoverBorderColor: \"rgba(9,138,1,.5)\",\n            pointBorderWidth: 0.5,\n            data: entrada2\n        }]\n    };\n    var chartRadarOptions = {\n        scale: {\n            ticks: {\n                beginAtZero: true,\n                maxTicksLimit: 10\n            },\n            pointLabels: {\n                fontSize: 12\n            },\n            gridLines: {\n                color: '#999'\n            }\n        }\n\n    };\n    var chartRadar = new Chart(chartRadarDOM, {\n        type: 'radar',\n        data: chartRadarData,\n        options: chartRadarOptions\n    });\n}\n/**\n * @autor:godie007\n * @date: 2017/04/13 14:02\n * Funcion para limitar el los campos de texto a solo el rango que este configurado en la seccion de indicadores\n **/\nwindow.minmax =function(value, min, max) {\n    if (parseInt(value) < min || isNaN(parseInt(value))) {\n        return min;\n    } else {\n\n        if (parseInt(value) > max) {\n            toastr.options = {\n                closeButton: true,\n                debug: false,\n                newestOnTop: false,\n                progressBar: true,\n                positionClass: \"toast-top-center\" || 'toast-top-right',\n                preventDuplicates: false,\n                timeOut: \"1000\",\n                onclick: function() {\n                    console.log(\"Toco el Mensaje\");\n                }\n            };\n            /**\n             * @autor:godie007\n             * @date: 2017/04/13 14:31\n             * Plugin para mostrar Notificaci√≥n emergente de Advertenca\n             **/\n            toastr.warning(\"El valor debe estar en el intervalo [\" + min + \",\" + max + \"]\", \"Importante!\");\n            return max;\n        } else {\n            return value;\n        }\n    }\n\n};\n"]}