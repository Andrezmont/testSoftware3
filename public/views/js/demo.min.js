/*
 Godie007 2017-01-20 
*/

function tomarValores(){var a="[{";a+='"usuario":"'+$("#usuario").attr("class")+'",',a+='"campos":[';for(var b=$('input[type=date]:visible,input[type=file]:visible,input[id^="number-"]:visible,input[id^="text-"]:visible,textarea[id^="textarea-"]:visible,select[id^="select-"]:visible,input[id^="radio-group-"]:checked:visible,input[id^="checkbox-"]:checked:visible'),c=b.length-1;c>=0;c--)if(b.eq(c).length>0){var d=b.eq(c).parent().find("label").text().trim(),e=""===b.eq(c).val()?" ":b.eq(c).val();if(b.eq(c).attr("id").indexOf("radio-group")!==-1&&(d=b.eq(c).parent().parent().find("label").eq(0).text().trim(),e=b.eq(c).is(":checked")),b.eq(c).attr("id").indexOf("checkbox")!==-1&&(b.eq(c).attr("id").indexOf("checkbox-group")!==-1?(d=b.eq(c).parent().parent().find("label").eq(0).text().trim(),e=b.eq(c).is(":checked")):(d=b.eq(c).parent().find("label").eq(0).text().trim(),e=b.eq(c).is(":checked"))),b.eq(c).attr("id").indexOf("select-")!==-1&&(e=b.eq(c).find("option:selected").val()),b.eq(c).attr("id").indexOf("file-")!==-1){var f=b.eq(c).attr("id").split("-")[1];e="<img src="+$("#imagen"+f+" img").prop("src")+" style=height:80px;width:80px;>"}a+='{"id":"'+b.eq(c).attr("id")+'",',a+='"titulo":"'+d+'",',a+='"valor":"'+e+'"}',c>0&&(a+=",")}a+="]}",a+="]",console.log(a);var g=JSON.parse(a)[0];return g}function encodeImageFileAsURL(a,b){var c=a.files;if(c.length>0){var d=c[0];if(d.name.match(/\.(jpg|jpeg|png|gif|tiff|bmp|ico)$/))if(d.size/1024<=30){var e=new FileReader;e.onload=function(a){var c=document.createElement("img"),d=a.target.result;c.src=d,document.getElementById("imagen"+b).innerHTML=c.outerHTML},e.readAsDataURL(d)}else alert("Disculpe, No se permiten Imagenes mayores a 30 kb!");else alert("El archivo que intenta subir no es una Imgen")}}jQuery(document).ready(function(a){a.ajax({url:"/account/formulario/",type:"POST",error:function(a){console.log(a)},success:function(b){b.length>0&&window.sessionStorage.setItem("formData",JSON.stringify(JSON.stringify(b)));var c=b.length>0?JSON.stringify(JSON.stringify(b)):window.sessionStorage.getItem("formData"),d=document.querySelector(".build-wrap"),e=document.querySelector(".render-wrap"),f=document.getElementById("edit-form"),g=c,h=!0,i={dataType:"json"};g&&(i.formData=JSON.parse(g));var j=function(){document.body.classList.toggle("form-rendered",h),h=!h},k=a(d).formBuilder(i).data("formBuilder");j(),a(e).formRender({dataType:"json",formData:k.formData}),a("input[id^='file-']:visible").each(function(){var b=a(this).attr("id").split("-")[1];a(".field-file-"+b).append('<div id="imagen'+b+'"></div>'),a("#file-"+b).change(function(){encodeImageFileAsURL(this,b)})}),a(".form-builder-save").click(function(){console.log("Has Guardado"),j(),a(e).formRender({dataType:"json",formData:k.formData}),window.sessionStorage.setItem("formData",JSON.stringify(k.formData));var b=JSON.parse(k.formData);a.ajax({url:"/account/clienteTodo/",type:"DELETE",error:function(a){console.log(a)},success:function(a){console.log(a)}}),setTimeout(function(){for(var c=0;c<b.length;c++){var d=b[c];d.indice=c,d.usuario=a("#usuario").attr("class"),d.modulo=a("#modulo").attr("class"),a.ajax({url:"/account/cliente/dinamica/",type:"POST",data:b[c],error:function(a){console.log(a)},success:function(a){console.log(a)}})}},500)}),f.onclick=function(){j()}}})});
//# sourceMappingURL=demo.min.js.map